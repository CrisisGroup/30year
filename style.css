/* =========================================
   TOKENS
========================================= */
:root {
  --bg-1: #111;
  --bg-2: #222;
  --fg: #fff;
  --dividerW: 1px;
  --gap: clamp(24px, 4vw, 56px);
  --padX: clamp(16px, 4vw, 48px);
  --grad-top: #003E51;
  --grad-bottom: #000000;
}

/* =========================================
   BASE / TYPE
========================================= */
*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  font-family: sans-serif;
  color: var(--fg);
  overflow-x: hidden;
}

h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Gill Sans MT", sans-serif;
  font-weight: 700;
  line-height: 1.2;
  margin: 0 0 .5em;
}

h1 {
  font-size: clamp(2.25rem, 6vw, 4rem);
  line-height: 1;
  color: #fff;
  margin: 0 0 .5em;
  max-width: 22ch;
}

h2 {
  font-size: clamp(1.75rem, 4vw, 2.75rem);
}

h3 {
  font-size: clamp(1.25rem, 3vw, 1.75rem);
}

h2#introchap {
  font-family: Georgia, serif;
  font-weight: 400;
  font-size: clamp(1.5rem, 3vw, 2rem);
  line-height: 1;
  font-feature-settings: "tnum" on, "lnum" on;
  color: #fff;
  margin: 0;
}

p,
li {
  font-family: Georgia, serif;
  font-size: clamp(1rem, 1.5vw, 1.125rem);
  line-height: 1.5;
}

a,
.highlight {
  font-family: "Gill Sans MT", sans-serif;
  font-weight: 700;
  color: #E87722;
  text-decoration: none;
  transition: color .3s ease, text-underline-offset .3s ease;
}

a:hover {
  color: #fff;
  text-decoration: underline;
  text-decoration-style: dotted;
  text-underline-offset: 5px;
}

/* =========================================
   VERTICAL PAGES (DEFAULT)
========================================= */
.page {
  min-height: 100vh;
  display: block;
  /* transparent to show bgfx */
}

/* image | divider | text */
.page--split {
  display: grid;
  grid-template-columns: minmax(0, 1fr) var(--dividerW) minmax(0, 1fr);
  align-items: center;
  gap: var(--gap);
  padding: 0 var(--padX);
  min-height: 100vh;
  position: relative;
}

.image-col {
  min-width: 0;
}

.image-col img {
  display: block;
  width: 100%;
  height: auto;
  border: 2px solid #fff;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .45);
}

.split-divider {
  position: relative;
  width: var(--dividerW);
  height: 100%;
}

.split-divider::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: var(--dividerW);
  background: #fff;
}

.text-col {
  min-width: 0;
}

/* readable measure for right column (also reused in horizontal split) */
.text-col {
  inline-size: clamp(36ch, 42vw, 52ch);
  justify-self: start;
}

.text-col h2 {
  margin: 0 0 .6rem;
  font-size: clamp(1.75rem, 5vw, 2.75rem);
}

.text-col p {
  margin: 0 0 .9rem;
  font-size: clamp(1rem, 2.4vw, 1.15rem);
  line-height: 1.5;
  max-width: 52ch;
}

/* --- Intro overrides --- */
.page--intro {
  position: relative;
}

.page--intro .intro-circle {
  position: absolute;
  left: 30vw;
  top: 10vh;
  width: clamp(400px, 40vw, 826px);
  height: clamp(400px, 40vw, 826px);
  background: #F5F5F5;
  mix-blend-mode: color-burn;
  border: 2px solid #fff;
  border-radius: 50%;
  z-index: 0;
  pointer-events: none;
}

.page--intro .split-divider::before {
  top: 50%;
  bottom: 0;
}

.page--intro .intro-icon {
  display: flex;
  align-items: flex-start;
  justify-content: flex-end;
}

.page--intro .intro-icon img {
  width: clamp(120px, 20vw, 180px);
  height: auto;
  border: none;
  box-shadow: none;
}

/* --- Vertical responsive --- */
@media (max-width:768px) {
  .page--intro .split-divider {
    display: none;
  }

  h1 {
    font-size: clamp(1.75rem, 5vw, 2.5rem);
  }

  h2#introchap {
    font-size: clamp(1.25rem, 4vw, 1.5rem);
  }

  .page--split {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 16px;
  }

  .split-divider {
    display: none;
  }

  .image-col img {
    width: 100%;
    height: auto;
  }

  .text-col {
    align-self: stretch;
    padding: 0 8px;
  }

  .text-col h2 {
    margin-bottom: .5rem;
  }

  .text-col p {
    line-height: 1.4;
    margin-bottom: .75rem;
  }
}

/* =========================================
   HORIZONTAL SCROLLER
========================================= */
.horizontal-section {
  position: relative;
  height: 100vh;
  overflow: hidden;
  background: var(--bg-2);
  overscroll-behavior: none;
}

.horizontal-track {
  display: flex;
  height: 100%;
  will-change: transform;
}

.horizontal-panel {
  min-width: 100vw;
  height: 100vh;
  flex: 0 0 100vw;
}

.horizontal-panel:nth-child(odd) {
  background: rgba(255, 255, 255, .05);
}

.horizontal-panel:nth-child(even) {
  background: rgba(255, 255, 255, .10);
}

@media (prefers-reduced-motion:reduce) {
  .horizontal-track {
    transition: none !important;
  }
}

/* --- Horizontal split variant (empty | divider | text) --- */
.horizontal-panel.panel--split {
  display: grid;
  grid-template-columns: minmax(0, 1.25fr) var(--dividerW) minmax(0, 1fr);
  align-items: center;
  gap: var(--gap);
  padding: 0 var(--padX);
  position: relative;
  min-height: 100%;
  height: 100%;
}

.panel--split .empty-col {
  min-width: 0;
}

.panel--split .split-divider {
  position: relative;
  width: var(--dividerW);
  height: 100%;
}

.panel--split .split-divider::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: var(--dividerW);
  background: #fff;
}

.panel--split .text-col {
  min-width: 0;
}

/* measure already set above */
.panel--split .text-col h2 {
  margin: 0 0 .6rem;
  font-size: clamp(1.75rem, 5vw, 2.75rem);
}

.panel--split .text-col p {
  margin: 0;
  max-width: 52ch;
  font-size: clamp(1rem, 2.4vw, 1.15rem);
  line-height: 1.5;
}

/* small rhythm for stacked headings */
.panel--split .text-col h2+p {
  margin-top: .5rem;
}

.panel--split .text-col p+h2 {
  margin-top: 1.5rem;
}

/* --- Horizontal "row" variant (text+year | text+year) --- */
.horizontal-panel.panel--row {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-auto-rows: auto;
  align-items: end;
  gap: clamp(24px, 5vw, 64px);
  padding: 0 var(--padX);
}

.horizontal-panel.panel--row>p:nth-of-type(1) {
  grid-column: 1;
  grid-row: 1;
}

.horizontal-panel.panel--row>h2:nth-of-type(1) {
  grid-column: 1;
  grid-row: 2;
}

.horizontal-panel.panel--row>p:nth-of-type(2) {
  grid-column: 2;
  grid-row: 1;
}

.horizontal-panel.panel--row>h2:nth-of-type(2) {
  grid-column: 2;
  grid-row: 2;
}

.horizontal-panel.panel--row p {
  margin: 0;
  max-width: 52ch;
  font-family: Georgia, serif;
  font-size: clamp(1rem, 2.4vw, 1.15rem);
  line-height: 1.5;
}

.horizontal-panel.panel--row h2 {
  margin: .75rem 0 0;
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  line-height: 1.1;
}

/* --- Optional "row" with images --- */
.panel--row {
  align-items: stretch;
}

.panel--row .row-entry {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.row-figure {
  margin: 0 0 1rem;
}

.row-figure img {
  display: block;
  width: 100%;
  height: auto;
  border: 4px solid #fff;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .45);
}

.panel--row .row-entry p {
  margin: 0;
  max-width: 52ch;
  font-family: Georgia, serif;
  font-size: clamp(1rem, 2.4vw, 1.15rem);
  line-height: 1.5;
}

.panel--row .row-entry h2 {
  margin: .75rem 0 0;
  font-size: clamp(1.25rem, 3vw, 1.75rem);
  line-height: 1.1;
  margin-top: auto;
}

/* --- Horizontal responsive --- */
@media (max-width:768px) {
  .horizontal-panel.panel--split {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 16px;
  }

  .panel--split .split-divider {
    display: none;
  }

  .panel--split .text-col {
    align-self: stretch;
    padding: 0 8px;
  }

  .panel--split .text-col p {
    line-height: 1.4;
    margin-top: .75rem;
  }

  .horizontal-panel.panel--row {
    grid-template-columns: 1fr;
    gap: 1.25rem;
    padding: 16px;
  }

  .horizontal-panel.panel--row>* {
    grid-column: 1;
    grid-row: auto;
  }

  .panel--row .row-entry {
    height: auto;
  }
}

/* =========================================
   SCENE-SPECIFIC: FULL-PANEL BG IMAGE
   (first horizontal split with background art)
========================================= */
.horizontal-panel.panel--split.panel--bgimg {
  position: relative;
  overflow: hidden;
}

.horizontal-panel.panel--split.panel--bgimg::before {
  content: "";
  position: absolute;
  inset: clamp(16px, 3vh, 48px) clamp(24px, 6vw, 80px);
  background-image: url("images/scene4_bg.png");
  background-size: 90%;
  background-position: center;
  background-repeat: no-repeat;
  mix-blend-mode: color-dodge;
  pointer-events: none;
  z-index: 0;
}

.horizontal-panel.panel--split.panel--bgimg>* {
  position: relative;
  z-index: 1;
}

/* =========================================
   L-SHAPED TIMELINE (first horizontal bg panel)
========================================= */
/* kill the default full-height spine on just this panel */
.horizontal-panel.panel--split.panel--bgimg.panel--Ltimeline .split-divider {
  display: none !important;
}

/* paint the L: vertical top→50%, then center→right inside padding */
.horizontal-panel.panel--split.panel--bgimg.panel--Ltimeline::after {
  content: "";
  position: absolute;
  inset: 0;
  /* cover the whole panel */
  z-index: 2;
  pointer-events: none;
  --lineW: 1px;
  --lineColor: #fff;
  /* draw in the outer box so padding doesn't clip the bar */
  background-origin: padding-box;
  /* default; ensures not content-box */
  background-clip: padding-box;
  /* IMPORTANT: no padding here */
  padding: 0;
  background:
    /* vertical leg: centered, from top to 50% */
    linear-gradient(var(--lineColor), var(--lineColor)) 50% 0 / var(--lineW) 70% no-repeat,

    /* horizontal arm: RIGHT edge anchored at center, extend leftward 50% of panel width */
    linear-gradient(var(--lineColor), var(--lineColor)) 100% 70% / 50% var(--lineW) no-repeat
}

@media (max-width:768px) {
  .horizontal-panel.panel--split.panel--bgimg.panel--Ltimeline::after {
    display: none;
  }
}

/* ================================
   HORIZONTAL 2-UP ROW — TWEAKS
   ================================ */

/* make the two columns behave and stop stretching content full height */
.horizontal-panel.panel--row {
  position: relative;
  /* for the timeline line */
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: clamp(24px, 5vw, 64px);
  padding: 0 var(--padX);
  align-items: start;
  /* don't stretch to equal heights */
}

/* each entry stacks image → text → year in normal flow */
.panel--row .row-entry {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-top: 25%;
  margin-left: 20%;
}

/* images: smaller cap, responsive */
.row-figure {
  margin: 0 0 1rem;
}

.row-figure img {
  display: block;
  width: 100%;
  max-width: clamp(240px, 28vw, 420px);
  /* adjust to taste */
  height: auto;
  border: 2px solid #fff;
  box-shadow: 0 6px 18px rgba(0, 0, 0, .45);
}

/* body copy + year */
.panel--row .row-entry p {
  margin: 0;
  max-width: 52ch;
  font-family: Georgia, serif;
  font-size: clamp(1rem, 2.4vw, 1.15rem);
  line-height: 1.5;
}

/* no more "pin to bottom" — just a small gap */
.panel--row .row-entry h2 {
  margin: .75rem 0 0;
  font-family: "Gill Sans MT", sans-serif;
  font-weight: 700;
  font-size: clamp(1.25rem, 3vw, 2.75rem);
  line-height: 1.1;
}

/* optional timeline line at 70% viewport height
   -> add class "panel--Hline70" on the same panel */
.horizontal-panel.panel--row.panel--Hline70::before {
  --lineW: 1px;
  --lineColor: #fff;
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  /* use 0/0 if you want full-bleed */
  top: 70vh;
  /* the requested height */
  height: var(--lineW);
  background: var(--lineColor);
  opacity: .85;
  pointer-events: none;
  z-index: 2;
}

/* mobile: stack; hide the line for clarity */
@media (max-width: 768px) {
  .horizontal-panel.panel--row {
    grid-template-columns: 1fr;
    gap: 1.25rem;
    padding: 16px;
  }

  .horizontal-panel.panel--row.panel--Hline70::before {
    display: none;
  }
}

/* =========================================
   Vertical with Liftout
========================================= */

/* Left column now stacks a liftout + a photo with the same visual language */
.page--liftout .image-col {
  display: flex;
  flex-direction: column;
  gap: clamp(16px, 2.5vw, 24px);
  align-items: flex-start;
}

/* Liftout styling mirrors the photo frame */
.liftout{
  max-width: clamp(28ch, 40vw, 46ch);
  padding: clamp(16px, 2.5vw, 28px) clamp(20px, 3vw, 36px);
  background: rgba(0,0,0,.6);
  border: none;
  box-shadow: 0 6px 18px rgba(0,0,0,.45);
  color: #fff;
  font-style: italic;
  font-family: Georgia, serif;
  font-size: clamp(1.125rem, 2.4vw, 1.75rem);
  line-height: 1.45;
}

.liftout p {
  font-size: 1.75rem;
}

.liftout footer{
  margin-top: .75rem;
  font-family: "Gill Sans MT", sans-serif;
  font-weight: 700;
  font-style: normal;
  font-size: clamp(.95rem, 1.8vw, 1.1rem);
  color: #E87722;
}

/* Keep photo treatment consistent with the rest of the site */
.photo { margin: 0; }
.photo img{
  display: block;
  width: 100%;
  height: auto;
  border: 2px solid #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,.45);
  max-width: min(46vw, 720px); /* optional cap so it doesn’t overpower the text */
}

/* Mobile: stacks naturally with some breathing room */
@media (max-width: 768px){
  .page--liftout .image-col { align-items: stretch; }
  .liftout{ max-width: 100%; padding: 16px 18px; }
  .photo img{ max-width: 100%; }
}

/* =========================================
   With YT Video embed
========================================= */

/* Video embed wrapper keeps the same photo frame look */
.video-embed {
  position: relative;
  padding-bottom: 56.25%; /* 16:9 aspect ratio */
  height: 0;
  overflow: hidden;
  width: 100%;
}

.video-embed iframe {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  border: 2px solid #fff;
  box-shadow: 0 6px 18px rgba(0,0,0,.45);
}


/* =========================================
   PER-FRAME OVERLAYS (transparent)
========================================= */
.page.frame--gradient,
.horizontal-panel.frame--gradient {
  --grad-top: #003E51;
  --grad-bottom: #000;
  --overlay-alpha: .6;
  background: linear-gradient(to bottom,
      color-mix(in srgb, var(--grad-top) calc(var(--overlay-alpha)*100%), transparent),
      color-mix(in srgb, var(--grad-bottom) calc(var(--overlay-alpha)*100%), transparent));
}

.page.frame--black,
.horizontal-panel.frame--black {
  --overlay-alpha: .6;
  background: rgba(0, 0, 0, var(--overlay-alpha));
}

.page.frame--blue,
.horizontal-panel.frame--blue {
  --overlay-alpha: .85;
  background: rgba(0, 62, 81, var(--overlay-alpha));
}

/* =========================================
   GLOBAL FIXED BACKGROUND (grain, circle)
========================================= */
.bgfx {
  position: fixed;
  inset: 0;
  z-index: -1;
  background: #003E51;
  overflow: hidden;
  pointer-events: none;
}

.bgfx__circle {
  position: absolute;
  left: 30vw;
  top: 10vh;
  width: clamp(400px, 40vw, 826px);
  height: clamp(400px, 40vw, 826px);
  background: #F5F5F5;
  mix-blend-mode: color-burn;
  border: 2px solid #fff;
  border-radius: 50%;
  pointer-events: none;
  z-index: 0;
}

.bgfx__parallax {
  position: absolute;
  top: -5%;
  left: -5%;
  width: 110%;
  height: 110%;
  background: radial-gradient(circle at 50% 50%, rgba(255, 255, 255, .05) 0%, transparent 70%);
  transition: transform .3s ease-out;
}

.bgfx__grain {
  position: absolute;
  inset: 0;
  opacity: .7;
  background-image:
    radial-gradient(circle at 23% 34%, rgba(255, 255, 255, .20) .5px, transparent 1px),
    radial-gradient(circle at 67% 12%, rgba(0, 0, 0, .15) .3px, transparent .8px),
    radial-gradient(circle at 89% 78%, rgba(255, 255, 255, .10) .4px, transparent 1.2px),
    radial-gradient(circle at 45% 91%, rgba(0, 0, 0, .12) .6px, transparent 1px),
    radial-gradient(circle at 12% 56%, rgba(255, 255, 255, .15) .3px, transparent .9px),
    radial-gradient(circle at 78% 45%, rgba(0, 0, 0, .08) .8px, transparent 1.5px);
  background-size: 13px 17px, 19px 23px, 11px 29px, 31px 13px, 17px 19px, 23px 31px;
  background-position: 0 0, 7px 11px, 13px 3px, 21px 19px, 31px 7px, 5px 23px;
  animation: bgfx-grain-float 12s ease-in-out infinite;
}

@keyframes bgfx-grain-float {

  0%,
  100% {
    transform: translate(0, 0) rotate(0);
    opacity: .7;
  }

  25% {
    transform: translate(-3px, -2px) rotate(.5deg);
    opacity: .8;
  }

  50% {
    transform: translate(2px, 3px) rotate(-.3deg);
    opacity: .6;
  }

  75% {
    transform: translate(-1px, -4px) rotate(.2deg);
    opacity: .9;
  }
}

.bgfx__texture {
  position: absolute;
  inset: 0;
  mix-blend-mode: overlay;
  background-image:
    radial-gradient(circle at 34% 67%, rgba(255, 255, 255, .05) .2px, transparent .5px),
    radial-gradient(circle at 78% 23%, rgba(0, 0, 0, .04) .1px, transparent .3px),
    radial-gradient(circle at 56% 89%, rgba(255, 255, 255, .03) .3px, transparent .6px),
    radial-gradient(circle at 12% 45%, rgba(0, 0, 0, .06) .15px, transparent .4px),
    radial-gradient(circle at 91% 12%, rgba(255, 255, 255, .04) .25px, transparent .5px);
  background-size: 7px 11px, 5px 13px, 9px 7px, 11px 5px, 13px 9px;
  background-position: 3px 7px, 11px 2px, 17px 13px, 23px 5px, 29px 19px;
  animation: bgfx-fine 20s linear infinite reverse;
}

@keyframes bgfx-fine {
  0% {
    transform: translate(0, 0);
  }

  20% {
    transform: translate(-1px, 1px);
  }

  40% {
    transform: translate(1px, -.5px);
  }

  60% {
    transform: translate(-.5px, -1px);
  }

  80% {
    transform: translate(.5px, .5px);
  }

  100% {
    transform: translate(0, 0);
  }
}

@media (hover:hover) and (pointer:fine) {
  .bgfx:hover .bgfx__grain {
    animation-duration: 4s;
    opacity: 1;
    transform: scale(1.02);
  }

  .bgfx:hover .bgfx__texture {
    animation-duration: 8s;
    opacity: .8;
  }
}

@media (min-width:3840px) {
  .bgfx__grain {
    background-size: 26px 34px, 38px 46px, 22px 58px, 62px 26px, 34px 38px, 46px 62px;
    background-position: 0 0, 14px 22px, 26px 6px, 42px 38px, 62px 14px, 10px 46px;
  }

  .bgfx__texture {
    background-size: 14px 22px, 10px 26px, 18px 14px, 22px 10px, 26px 18px;
  }
}

@media (prefers-reduced-motion:reduce) {

  .bgfx__grain,
  .bgfx__texture {
    animation: none;
  }

  .bgfx__parallax {
    transition: none;
  }
}

/* Ensure sections/panels stay transparent over bgfx */
.page,
.horizontal-panel,
.horizontal-section {
  background: transparent;
}